{"ast":null,"code":"import _slicedToArray from\"/Users/de-lovely/Documents/OnlineOrder/online-order-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Button,Drawer,List,message,Typography}from\"antd\";import{useEffect,useState}from\"react\";import{checkout,getCart}from\"../utils\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Text=Typography.Text;var MyCart=function MyCart(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),cartVisible=_useState2[0],setCartVisible=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),cartData=_useState4[0],setCartData=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),checking=_useState8[0],setChecking=_useState8[1];useEffect(function(){if(!cartVisible){return;}setLoading(true);getCart().then(function(data){setCartData(data);}).catch(function(err){message.error(err.message);}).finally(function(){setLoading(false);});},[cartVisible]);var onCheckOut=function onCheckOut(){setChecking(true);checkout().then(function(){message.success(\"Successfully checkout\");setCartVisible(false);}).catch(function(err){message.error(err.message);}).finally(function(){setChecking(false);});};var onCloseDrawer=function onCloseDrawer(){setCartVisible(false);};var onOpenDrawer=function onOpenDrawer(){setCartVisible(true);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Button,{type:\"primary\",shape:\"round\",onClick:onOpenDrawer,children:\"Cart\"}),/*#__PURE__*/_jsx(Drawer,{title:\"My Shopping Cart\",onClose:onCloseDrawer,visible:cartVisible,width:520,footer:/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",justifyContent:\"space-between\"},children:[/*#__PURE__*/_jsx(Text,{strong:true,children:\"Total price: $\".concat(cartData===null||cartData===void 0?void 0:cartData.totalPrice)}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Button,{onClick:onCloseDrawer,style:{marginRight:8},children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{onClick:onCheckOut,type:\"primary\",loading:checking,disabled:loading||(cartData===null||cartData===void 0?void 0:cartData.orderItemList.length)===0,children:\"Checkout\"})]})]}),children:/*#__PURE__*/_jsx(List,{loading:loading,itemLayout:\"horizontal\",dataSource:cartData===null||cartData===void 0?void 0:cartData.orderItemList,renderItem:function renderItem(item){return/*#__PURE__*/_jsx(List.Item,{children:/*#__PURE__*/_jsx(List.Item.Meta,{title:item.menuItem.name,description:\"$\".concat(item.price)})});}})})]});};export default MyCart;","map":{"version":3,"names":["Button","Drawer","List","message","Typography","useEffect","useState","checkout","getCart","Text","MyCart","cartVisible","setCartVisible","cartData","setCartData","loading","setLoading","checking","setChecking","then","data","catch","err","error","finally","onCheckOut","success","onCloseDrawer","onOpenDrawer","display","justifyContent","totalPrice","marginRight","orderItemList","length","item","menuItem","name","price"],"sources":["/Users/de-lovely/Documents/OnlineOrder/online-order-frontend/src/components/MyCart.jsx"],"sourcesContent":["import { Button, Drawer, List, message, Typography } from \"antd\";\nimport { useEffect, useState } from \"react\";\nimport { checkout, getCart } from \"../utils\";\n\nconst { Text } = Typography;\n\nconst MyCart = () => {\n  const [cartVisible, setCartVisible] = useState(false);\n  const [cartData, setCartData] = useState();\n  const [loading, setLoading] = useState(false);\n  const [checking, setChecking] = useState(false);\n\n  useEffect(() => {\n    if (!cartVisible) {\n      return;\n    }\n\n    setLoading(true);\n    getCart()\n      .then((data) => {\n        setCartData(data);\n      })\n      .catch((err) => {\n        message.error(err.message);\n      })\n      .finally(() => {\n        setLoading(false);\n      });\n  }, [cartVisible]);\n\n  const onCheckOut = () => {\n    setChecking(true);\n    checkout()\n      .then(() => {\n        message.success(\"Successfully checkout\");\n        setCartVisible(false);\n      })\n      .catch((err) => {\n        message.error(err.message);\n      })\n      .finally(() => {\n        setChecking(false);\n      });\n  };\n\n  const onCloseDrawer = () => {\n    setCartVisible(false);\n  };\n\n  const onOpenDrawer = () => {\n    setCartVisible(true);\n  };\n\n  return (\n    <>\n      <Button type=\"primary\" shape=\"round\" onClick={onOpenDrawer}>\n        Cart\n      </Button>\n      <Drawer\n        title=\"My Shopping Cart\"\n        onClose={onCloseDrawer}\n        visible={cartVisible}\n        width={520}\n        footer={\n          <div\n            style={{\n              display: \"flex\",\n              justifyContent: \"space-between\",\n            }}\n          >\n            <Text strong={true}>{`Total price: $${cartData?.totalPrice}`}</Text>\n            <div>\n              <Button onClick={onCloseDrawer} style={{ marginRight: 8 }}>\n                Cancel\n              </Button>\n              <Button\n                onClick={onCheckOut}\n                type=\"primary\"\n                loading={checking}\n                disabled={loading || cartData?.orderItemList.length === 0}\n              >\n                Checkout\n              </Button>\n            </div>\n          </div>\n        }\n      >\n        <List\n          loading={loading}\n          itemLayout=\"horizontal\"\n          dataSource={cartData?.orderItemList}\n          renderItem={(item) => (\n            <List.Item>\n              <List.Item.Meta\n                title={item.menuItem.name}\n                description={`$${item.price}`}\n              />\n            </List.Item>\n          )}\n        />\n      </Drawer>\n    </>\n  );\n};\n\nexport default MyCart;"],"mappings":"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"},"metadata":{},"sourceType":"module"}